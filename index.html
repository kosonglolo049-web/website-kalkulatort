<!DOCTYPE html>
<html lang="id">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>Kalkulator buatan âœ‹</title>
  <style>
    body {
      display: flex;
      flex-direction: column;
      justify-content: center;
      align-items: center;
      height: 100vh;
      margin: 0;
      font-family: Arial, sans-serif;
      color: #fff;
      background: url('https://i.gifer.com/fxVE.gif') no-repeat center center fixed;
      background-size: cover;
    }

    h1 {
      margin-bottom: 15px;
      font-size: 26px;
      font-weight: bold;
      text-shadow: 0 0 10px #ffdd57;
    }

    .calculator {
      width: 320px;
      max-width: 95%;
      background: rgba(43,43,60,0.85);
      border-radius: 15px;
      box-shadow: 0 8px 20px rgba(0,0,0,0.5);
      padding: 15px;
    }

    .tabs { display: flex; margin-bottom: 10px; }
    .tab {
      flex: 1;
      text-align: center;
      padding: 10px;
      background: #3b3b4f;
      cursor: pointer;
      border-radius: 10px 10px 0 0;
      transition: 0.2s;
    }
    .tab.active { background: #6a5acd; font-weight: bold; }
    .tab-content { display: none; }
    .tab-content.active { display: block; }
    .display {
      width: 100%; height: 50px; margin-bottom: 15px;
      text-align: right; padding: 10px; font-size: 22px;
      border: none; border-radius: 10px; background: #3b3b4f; color: #fff; outline: none;
    }
    .buttons { display: grid; grid-template-columns: repeat(4,1fr); gap: 10px; }
    .button {
      padding: 15px; font-size: 20px; text-align: center; border-radius: 10px;
      background: #4a4a5e; color: #fff; cursor: pointer; transition: 0.2s;
    }
    .button:hover { background: #5e5e75; }
    .button:active { transform: scale(0.95); }
    .operator { background: #ff8c42; }
    .equal { background: #6a5acd; }
    .clear { background: #e63946; grid-column: span 4; }

    .converter input, .converter select {
      width: 100%; padding: 8px; margin: 5px 0; border-radius: 8px;
      border: none; font-size: 16px; text-align: center;
    }
    .converter button {
      width: 100%; padding: 10px; background: #6a5acd; border: none;
      border-radius: 8px; color: white; font-size: 18px; cursor: pointer; margin-top: 10px;
    }
    .converter button:hover { background: #7c6edc; }
    .result { margin-top: 10px; font-weight: bold; font-size: 18px; color: #ffdd57; }

    .history-box { margin-top: 15px; background: #242432; border-radius: 10px; padding: 10px; max-height: 150px; overflow-y: auto; }
    .history-header {
      display: flex; justify-content: space-between; align-items: center;
      margin-bottom: 8px; font-weight: bold; color: #ffdd57;
    }
    .clear-history { background: #e63946; border: none; padding: 3px 8px; border-radius: 6px; color: white; cursor: pointer; font-size: 12px; }
    .history-item { padding: 5px; border-bottom: 1px solid #444; font-size: 14px; }
  </style>
</head>
<body>
  <h1>DITTYYAAAAA</h1>
  <div class="calculator">
    <div class="tabs">
      <div class="tab active" onclick="switchTab('calc')">Kalkulator</div>
      <div class="tab" onclick="switchTab('convert')">Konversi Uang</div>
    </div>

    <!-- Kalkulator -->
    <div class="tab-content active" id="calc">
      <input type="text" class="display" id="display" disabled>
      <div class="buttons">
        <div class="button" onclick="appendToDisplay('7',true)">7</div>
        <div class="button" onclick="appendToDisplay('8',true)">8</div>
        <div class="button" onclick="appendToDisplay('9',true)">9</div>
        <div class="button operator" onclick="appendToDisplay('/',false,true)">Ã·</div>

        <div class="button" onclick="appendToDisplay('4',true)">4</div>
        <div class="button" onclick="appendToDisplay('5',true)">5</div>
        <div class="button" onclick="appendToDisplay('6',true)">6</div>
        <div class="button operator" onclick="appendToDisplay('*',false,true)">Ã—</div>

        <div class="button" onclick="appendToDisplay('1',true)">1</div>
        <div class="button" onclick="appendToDisplay('2',true)">2</div>
        <div class="button" onclick="appendToDisplay('3',true)">3</div>
        <div class="button operator" onclick="appendToDisplay('-',false,true)">âˆ’</div>

        <div class="button" onclick="appendToDisplay('0',true)">0</div>
        <div class="button" onclick="appendToDisplay('.')">.</div>
        <div class="button equal" onclick="calculate()">=</div>
        <div class="button operator" onclick="appendToDisplay('+',false,true)">+</div>

        <div class="button operator" onclick="calculateRoot()">âˆš</div>

        <div class="button clear" onclick="clearDisplay()">C</div>
      </div>
    </div>

    <!-- Konversi -->
    <div class="tab-content" id="convert">
      <div class="converter">
        <input type="number" id="amount" placeholder="Masukkan jumlah">
        <select id="fromCurrency">
          <option value="IDR">IDR</option>
          <option value="USD">USD</option>
          <option value="EUR">EUR</option>
          <option value="JPY">JPY</option>
          <option value="SGD">SGD</option>
        </select>
        <select id="toCurrency">
          <option value="USD">USD</option>
          <option value="IDR">IDR</option>
          <option value="EUR">EUR</option>
          <option value="JPY">JPY</option>
          <option value="SGD">SGD</option>
        </select>
        <button onclick="convertMoney()">Konversi</button>
        <div class="result" id="result"></div>
      </div>
    </div>

    <!-- History -->
    <div class="history-box">
      <div class="history-header">
        <span>ðŸ“œ History</span>
        <button class="clear-history" onclick="clearHistory()">Hapus</button>
      </div>
      <div id="historyList"></div>
    </div>
  </div>

  <script>
    const display = document.getElementById('display');
    const historyList = document.getElementById('historyList');

    const words = { 1: 'satu', 2: 'dua', 3: 'tiga', 4: 'empat', 5: 'lima', 6: 'enam', 7: 'tujuh', 8: 'delapan', 9: 'sembilan', 0: 'nol',
                    '+':'tambah','-':'kurang','*':'kali','/':'bagi','=':'sama dengan','C':'hapus' };

    function numberToWordsID(n) {
      const satuan = ["","satu","dua","tiga","empat","lima","enam","tujuh","delapan","sembilan","sepuluh","sebelas"];
      n = Number(n);
      if(n < 12) return satuan[n];
      if(n < 20) return satuan[n-10]+" belas";
      if(n < 100) return numberToWordsID(Math.floor(n/10))+" puluh "+numberToWordsID(n%10);
      if(n < 200) return "seratus "+numberToWordsID(n-100);
      if(n < 1000) return numberToWordsID(Math.floor(n/100))+" ratus "+numberToWordsID(n%100);
      if(n < 2000) return "seribu "+numberToWordsID(n-1000);
      if(n < 1000000) return numberToWordsID(Math.floor(n/1000))+" ribu "+numberToWordsID(n%1000);
      if(n < 1000000000) return numberToWordsID(Math.floor(n/1000000))+" juta "+numberToWordsID(n%1000000);
      return n.toString();
    }

    function googleTTSLink(text) { return 'https://translate.google.com/translate_tts?ie=UTF-8&tl=id&client=tw-ob&q='+encodeURIComponent(text); }

    async function playSound(key) {
      let word;
      if(typeof key==="number" || (!isNaN(key) && key!=='')) word = numberToWordsID(Number(key));
      else word = words[key] || String(key);
      try { const audio = new Audio(googleTTSLink(word)); await audio.play(); }
      catch(err) { const utter = new SpeechSynthesisUtterance(word); utter.lang='id-ID'; speechSynthesis.cancel(); speechSynthesis.speak(utter); }
    }

    function appendToDisplay(v,isNumber=false,isOperator=false) { display.value+=v; if(isNumber) playSound(v); if(isOperator) playSound(v); }
    function clearDisplay() { display.value=''; playSound('C'); }
    function calculate() { 
      try { 
        const exp=display.value; 
        const res=Function('"use strict";return ('+exp+')')(); 
        display.value=res; 
        playSound('='); 
        setTimeout(()=>playSound(res),1000); 
        addHistory(`${exp} = ${res}`); 
      } catch(e){ display.value='Error'; } 
    }

    function calculateRoot() {
    let display = document.getElementById('display');
    let value = parseFloat(display.value);
    if (!isNaN(value)) {
        display.value = Math.sqrt(value);
    }
}

    const rates={IDR:1,USD:15500,EUR:16500,JPY:105,SGD:11500};
    function convertMoney(){
      const amt=parseFloat(document.getElementById('amount').value);
      const from=document.getElementById('fromCurrency').value;
      const to=document.getElementById('toCurrency').value;
      const resultElement=document.getElementById('result');
      if(isNaN(amt)){ resultElement.innerText="Masukkan angka!"; return; }
      if(from===to){ resultElement.innerText=`${amt.toLocaleString()} ${to}`; addHistory(`${amt} ${from} = ${amt} ${to}`); return; }
      const amtInIDR=amt*rates[from]; const conv=amtInIDR/rates[to];
      const finalRes=`â‰ˆ ${conv.toLocaleString(undefined,{maximumFractionDigits:2})} ${to}`;
      resultElement.innerText=finalRes; addHistory(`${amt} ${from} â†’ ${finalRes}`);
      const kalimat=`${numberToWordsID(amt)} ${from} sama dengan ${numberToWordsID(conv.toFixed(0))} ${to}`;
      setTimeout(()=>playSound(kalimat),800);
    }

    function switchTab(tab){
      document.querySelectorAll('.tab').forEach(t=>t.classList.remove('active'));
      document.querySelectorAll('.tab-content').forEach(c=>c.classList.remove('active'));
      document.querySelector(`.tab[onclick*="${tab}"]`).classList.add('active');
      document.getElementById(tab).classList.add('active');
    }

    function addHistory(txt){ const div=document.createElement('div'); div.className='history-item'; div.textContent=txt; historyList.prepend(div); if(historyList.children.length>20) historyList.removeChild(historyList.lastChild); }
    function clearHistory(){ historyList.innerHTML=''; }
  </script>
</body>
</html>